<!DOCTYPE html>
<html lang="zh" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>友善码</title>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0" />

  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="../../assets/custom.css">


</head>

<body class="bg-cloud">
  <nav class="navbar navbar-expand-lg navbar-light navbar-95 ">
    <a class="navbar-brand" href="index.html"><button class="btn btn-default hBack" type="button">返回</button></a>

  </nav>

  <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h2 class="display-5">友善码调查问卷</h2>
    <p class="lead">您好！为创造一个友好、和谐的公共环境，确保公共空间的安全与舒适，请您配合填写以下内容。</p>
  </div>

  <!-- Forms -->

  <div class="container pb-4">
    <div class="card mb-4">
      <div class="card-header">
        <h4 class="my-0 font-weight-normal">关于您</h4>
      </div>
      <div class="card-body">
        <form>
          <div class="form-group row">
            <label for="input-name" class="col-sm-2 col-form-label">您的姓名</label>
            <div class="col-sm-10">
              <input type="text" class="form-95" id="input-name">
            </div>
          </div>

          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-2 pt-0">
                您的性别
              </legend>
              <div class="col-sm-10">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="gender" id="gender-radio-1" value="male">
                  <label class="form-check-label" for="gender-radio-1">
                    男
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="gender" id="gender-radio-2" value="female">
                  <label class="form-check-label" for="gender-radio-2">
                    女
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="gender" id="gender-radio-3" value="none" disabled>
                  <label class="form-check-label" for="gender-radio-3">
                    其他
                  </label>
                </div>
              </div>
            </div>
          </fieldset>

          <div class="form-group row">
            <label for="input-location" class="col-sm-2 col-form-label">您的常住地/户籍所在地</label>
            <div class="col-sm-10">
              <input type="text" class="form-95" id="input-location">
            </div>
          </div>

          <hr class="separator">

          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-12 pt-0">
                过去两周内，您是否曾因不必要的小事与他人发生争执？
              </legend>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-1" id="question-1-1" value="option1">
                  <label class="form-check-label" for="question-1-1">
                    否
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-1" id="question-1-2" value="option2"
                    checked>
                  <label class="form-check-label" for="question-1-2">
                    是
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="question-1" id="question-1-3" value="option3"
                    disabled>
                  <label class="form-check-label" for="question-1-3">
                    我不确定
                  </label>
                </div>
              </div>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-12 pt-0">
                过去两周内，您是否曾辱骂、嘲笑或语言攻击他人？
              </legend>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-2" id="question-2-1" value="option1">
                  <label class="form-check-label" for="question-2-1">
                    否
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-2" id="question-2-2" value="option2"
                    checked>
                  <label class="form-check-label" for="question-2-2">
                    是
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="question-2" id="question-2-3" value="option3"
                    disabled>
                  <label class="form-check-label" for="question-2-3">
                    我不确定
                  </label>
                </div>
              </div>
            </div>
          </fieldset>


          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-12 pt-0">
                过去两周内，您是否曾与他人斗殴？
              </legend>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-3" id="question-3-1" value="option1">
                  <label class="form-check-label" for="question-3-1">
                    否
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-3" id="question-3-2" value="option2"
                    checked>
                  <label class="form-check-label" for="question-3-2">
                    是
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="question-3" id="question-3-3" value="option3"
                    disabled>
                  <label class="form-check-label" for="question-3-3">
                    我不确定
                  </label>
                </div>
              </div>
            </div>
          </fieldset>


          <div class="form-group">
            <div class="row">
              <div class="col-sm-12">
                过去两周内，您是否有过以下行为：
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="question-4-1" checked>
                  <label class="form-check-label" for="question-4-1">
                    对问路的陌生人视而不见
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="question-4-2" checked>
                  <label class="form-check-label" for="question-4-2">
                    对路边摔倒的老人避之不及
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="question-4-3" checked>
                  <label class="form-check-label" for="question-4-3">
                    对身边需要帮助的人冷眼旁观
                  </label>
                </div>

              </div>
            </div>
          </div>
          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-12 pt-0">
                过去两周内，您是否曾接受他人帮助，而未表达谢意？
              </legend>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-5" id="question-5-1" value="option1">
                  <label class="form-check-label" for="question-5-1">
                    否
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-5" id="question-5-2" value="option2"
                    checked>
                  <label class="form-check-label" for="question-5-2">
                    是
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="question-5" id="question-5-3" value="option3"
                    disabled>
                  <label class="form-check-label" for="question-5-3">
                    我不确定
                  </label>
                </div>
              </div>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label col-sm-12 pt-0">
                过去两周内，您是否曾对他人的无心之失表示苛责、鄙夷或轻蔑？
              </legend>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-6" id="question-6-1" value="option1">
                  <label class="form-check-label" for="question-6-1">
                    否
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question-6" id="question-6-2" value="option2"
                    checked>
                  <label class="form-check-label" for="question-6-2">
                    是
                  </label>
                </div>
                <div class="form-check disabled">
                  <input class="form-check-input" type="radio" name="question-6" id="question-6-3" value="option3"
                    disabled>
                  <label class="form-check-label" for="question-6-3">
                    我不确定
                  </label>
                </div>
              </div>
            </div>
          </fieldset>
          <hr class="separator">

        </form>

        <div class="row">
          <div class="col">
            <button type="" class="btn btn-primary" id='submit-button'>确认无误，提交问卷</button>
            <div class="mt-1" id='validation-warning' style="display:none;color: red;">
              请确保所有项目均已正确填写
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.slim.min.js"></script>
  <script>
    $('#submit-button').click(() => {

      let name = $('#input-name').prop('value');
      let location = $('#input-location').prop('value');
      let gender = 'none';


      if ($('#gender-radio-1').prop('checked')) gender = 'male';
      if ($('#gender-radio-2').prop('checked')) gender = 'female';

      if (gender === 'none' || name === '' || location === '') {
        $('#validation-warning').css('display', 'block');
        return;
      }


      let index = {
        caution: 0,
        warning: 0
      };

      // caution quesitons 1, 4, 5
      if ($('#question-1-2').prop('checked')) index.caution += 1;
      for (let i = 1; i < 4; i++) {
        let id = '#question-4-' + i;
        if ($(id).prop('checked')) index.caution += 1;
      }
      if ($('#question-5-2').prop('checked')) index.caution += 1;


      // warning questions 2, 3, 6
      if ($('#question-2-2').prop('checked')) index.warning += 1;
      if ($('#question-3-2').prop('checked')) index.warning += 1;
      if ($('#question-6-2').prop('checked')) index.warning += 1;

      console.log("Cautious answers:", index.caution);
      console.log("Warning answers:", index.warning);

      let type = 'good';
      if ((index.warning >= 1) || (index.warning === 0 && index.caution >= 3)) type = 'bad';
      else if (index.warning === 0 && index.caution >= 1 && index.caution <= 2) type = 'ok';

      console.log("The code is", type);
      window.location.href =
        `code.html?name=${name}&gender=${gender}&type=${type}`;

    });
  </script>

</body>

</html>
